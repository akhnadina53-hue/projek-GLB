<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Simulasi GLB Kejar-kejaran</title>

<style>
    canvas { border:1px solid black; margin-top:10px }
    .rumus { background:#f4f4f4; padding:10px; margin-top:10px }
</style>
</head>

<body>

<h2>Simulasi Kejar-kejaran Dua Benda (GLB)</h2>

Posisi awal A (m): <input id="xA0" value="0"><br><br>
Kecepatan A (m/s): <input id="vA" value="1"><br><br>
Posisi awal B (m): <input id="xB0" value="15"><br><br>
Kecepatan B (m/s): <input id="vB" value="0.5"><br><br>

<label>
<input type="checkbox" id="slow"> üê¢ Slow Motion
</label><br><br>

<button onclick="mulai()">‚ñ∂ Play</button>
<button onclick="pause()">‚è∏ Pause</button>
<button onclick="reset()">üîÑ Reset</button>

<p id="hasil"></p>

<canvas id="kanvas" width="800" height="150"></canvas>

<div class="rumus" id="rumus"></div>

<script>
let ctx = document.getElementById("kanvas").getContext("2d");
let animasi, jalan=false;

let xA0, xB0, vA, vB;
let xA, xB, t;
let skala = 35;

function mulai(){
    if(jalan) return;

    xA0 = parseFloat(xA0 = document.getElementById("xA0").value);
    xB0 = parseFloat(document.getElementById("xB0").value);
    vA  = parseFloat(document.getElementById("vA").value);
    vB  = parseFloat(document.getElementById("vB").value);

    if(xA0>=xB0 || vA<=vB){
        hasil.innerHTML="‚ùå A harus di belakang dan lebih cepat";
        return;
    }

    xA = xA0;
    xB = xB0;
    t  = 0;
    jalan = true;
    gambar();
}

function pause(){ jalan=false; }

function reset(){
    jalan=false;
    ctx.clearRect(0,0,800,150);
    hasil.innerHTML="";
    rumus.innerHTML="";
}

function gambar(){
    if(!jalan) return;

    ctx.clearRect(0,0,800,150);

    let slow = document.getElementById("slow").checked;
    let dt = slow ? 0.005 : 0.02;

    // lintasan
    ctx.beginPath();
    ctx.moveTo(20,75);
    ctx.lineTo(780,75);
    ctx.strokeStyle="#aaa";
    ctx.stroke();

    let jarak = xB-xA;

    // efek menyatu
    if(jarak<=0.2){
        ctx.beginPath();
        ctx.arc(xA*skala+50,75,16,0,Math.PI*2);
        ctx.fillStyle="purple";
        ctx.fill();

        hasil.innerHTML =
        "üß≤ <b>BERTEMU & MENYATU</b><br>"+
        "t = "+t.toFixed(2)+" s<br>"+
        "x = "+xA.toFixed(2)+" m";
        jalan=false;
        return;
    }

    // benda A
    ctx.beginPath();
    ctx.arc(xA*skala+50,75,12,0,Math.PI*2);
    ctx.fillStyle="red";
    ctx.fill();
    ctx.fillText("A",xA*skala+45,50);

    // benda B
    ctx.beginPath();
    ctx.arc(xB*skala+50,75,12,0,Math.PI*2);
    ctx.fillStyle="blue";
    ctx.fill();
    ctx.fillText("B",xB*skala+45,50);

    // rumus berjalan
    rumus.innerHTML = `
    <b>Rumus GLB:</b><br>
    x<sub>A</sub> = ${xA0} + ${vA}¬∑${t.toFixed(2)} = <b>${xA.toFixed(2)}</b><br>
    x<sub>B</sub> = ${xB0} + ${vB}¬∑${t.toFixed(2)} = <b>${xB.toFixed(2)}</b><br>
    Syarat bertemu: x<sub>A</sub> = x<sub>B</sub>
    `;

    xA += vA*dt;
    xB += vB*dt;
    t  += dt;

    animasi=requestAnimationFrame(gambar);
}
</script>

</body>
</html>
